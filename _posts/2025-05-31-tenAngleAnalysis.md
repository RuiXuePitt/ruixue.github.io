---
title: Repository of Ten Angle Analysis
date: 2025-05-31 11:33:00 +0800
math: true
permalink: /Ten Angle Analysis/
---

## Overview
[**tenAngleAnalysis**](https://gitlab.cern.ch/ruxue/tenangleanalysis) applies Fourier series analysis on the $t\bar{t}$ decay systems. By constructing a set of MM-functions (orthogonal bases derived from Wigner-D functions), the program is able to decompose high-dimensional angular distributions into well-defined series coefficients. These coefficients fully encode the underlying particle interacting information, ensuring that the complete physics content is preserved.

Using the MM-function method, this framework analyzes Monte-Carlo simulation data generated at different Effective Field Theory (EFT) reweighting points. The extracted coefficients are used for minimum $\chi^2$ fits to place constraints on EFT parameters. The project is aimed to probe potential beyond standard model signals in top-quark physics.

## Dependencies
- C++ 17 or newer
- ROOT (for ROOT file operations)
- Eigen (matrix operations)
- SQLite3 (database handling)
- Python (optional, for plotting, quick fitting, etc.)

For Ubuntu
```
    sudo apt install root-system eigen3 libsqlite3-dev
```

For IOS
```
    brew install root eigen sqlite
```

## Installation and Compilation
Clone the repository and build with CMake:
```
    git clone ssh://gitlab.cern.ch:7999/ruxue/tenangleanalysis.git
    cd tenAngleAnalysis
    mkdir build && cd build
    cmake ..
    make
```

## Configuration
The program is configured by a JSON file (config.json). It specifies the input files, the output path, and the EFT reweighting points researchers are instereted in. The ```"Chi2Fit"``` section is read by ```Chi2Fit.py```, and the ```"AngleAnalyze"```section is read by ```10aAnalyze_save.cpp``` and ```10aAnalyze_reduce.cpp```. Here is a minimal example:

```
    {
        "Chi2Fit":{
            "inputfile": "~/.../EFTanalyze_full.db",
            "outputPath": "~/.../Chi2Plots/",
            "EFT_list": {
                "ctGRe": [-0.8, -0.5, -0.2, 0.2],
            }
        },
        "AngleAnalyze": {
            "inputfile": [
                "~/.../ttbarEFT_MC20a.root",
                "~/.../ttbarEFT_MC20d.root",
                "~/.../ttbarEFT_MC20e.root"
            ],
            "outputfile": "~/.../EFTanalyze_full",
            "EFT_map": {
                "ctGRe": [-0.8, -0.5, -0.2, 0.2],
            }
        }
    }
```
Please make necessary changes to the JSON file before running the program.

## Usage
To run the main analyzer:
```
    ~/.../tenAngleAnalysis/build/bin/10aAnalyze_save
```
To run the reducer:
```
    ~/.../tenAngleAnalysis/build/bin/10aAnalyze_reducer ~/.../EFTanalyze_full
```
```EFTanalyze_full``` is a database file generated by ```10aAnalyze_save```.
To run the Chi2 fitter:
```
    python ~/.../tenAngleAnalysis/analyze/Chi2Fit.py
```

## Workflow
### 0. NTuple Reconstrution
Slim and merge NTuple slices, processed by [TopCPToolKit](https://topcptoolkit.docs.cern.ch), reconstruct angular variables which can be directly used by MM-function analysis. This process is done on CERN lxplus machine by [NTupleRecon](https://gitlab.cern.ch/atlas-ttbar-10-angle/ntuplerecon.git).

### 1. Angular Analysis
Perform angular analysis on the reconstructed ROOT data (```AngularAnalyze```), save results (MM-function coefficients, covariance matrices, $\chi^2$) into a SQLite database file (```DBHandler```).

### 2. Post Processing
- ```Chi2Fit.py```: Morph EFT reweighting points and fit parameters via $\chi^2$.
- ```10aAnalyze_reduce.cpp```: Further studies on EFT-space dimension reduction.

![Repository Structure](/assets/img/PostImages/tenAngleAnalysis.png){: w="400" h="400" }
_Repository Structure_

## ðŸš§ Project Status
This project is still under active development. Future updates will extend the current framework by incorporating additional orthogonal basis functions to cover more physics variables. Systematic uncertainties and improved $\chi^2$ formula with nuisance parameters will be included.
